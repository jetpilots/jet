enum ASTTypeTypes
unresolved = 0
end
enum ASTCollectionTypes
none = 0
end
enum ASTTokenKinds
unknown = 0
newline
oneSpace
keywordFor
keywordIf
number
string
identifier
resolvedIdentifier
end
declare type ASTImport
    var importFile = ""
    var aliasOffset = 0
    var isPackage = no
    var hasAlias = no
end type

declare type ASTUnits
    var powers as Number[]
    var factor = 0
    var factors as Number[]
    var label = ""
end type

declare type ASTTypeSpec
    var ttype as ASTType = nil
    var name = ""
    var units as ASTUnits = nil

    var dims = 0
    var col = 0
    var line = 0

    var typeType as ASTTypeTypes = .unresolved
    var collectionType as ASTCollectionTypes = .none
    var nullable = no
end type

declare type ASTVar
    var typeSpec as ASTTypeSpec = nil
    var init as ASTExpr = nil
    var name = ""
    var line = 0
    var col = 0
    var used = no
    var changed = no
    var isLet = no
    var isVar = no
    var stackAlloc = no
    var isTarget = no
    var printed = no
    var escapes = no
    var canInplace = no
    var returned = no
end type

declare type ASTExpr
    var line = 0
    var col = 0
    var typeType = ASTTypeTypes.unresolved
    var collectionType = ASTCollectionTypes.none
    var nullable = no
    var impure = no
    var elemental = no
    var throws = no
    var promote = no
    var canEval = no
    var didEval = no
    var prec = 0
    var unary = no
    var rassoc = no
    var kind = ASTTokenKinds.unknown
    var left as ASTExpr = nil
    var func as ASTFunc = nil
    var vvar as ASTVar = nil
    var body as ASTScope = nil
    var right as ASTExpr = nil
end type

declare type ASTScope
    var stmts as ASTExpr[]
    var locals as ASTVar[]
    var parent as ASTScope = nil
end type

declare type ASTType
    var super as ASTTypeSpec = nil
    var name = ""
    var body as ASTScope = nil
    var line = 0
    var col = 0
    var analysed = no
    var isValueType = no
end type

declare type ASTFunc
    var body as ASTScope = nil
    var args as ASTVar[]
    var argCount = 0

    var returnSpec as ASTTypeSpec = nil
    var name = ""
    var selector = ""
    var line = 0
    var usesIO = no
    var throws = no

    var isRecursive = no
    var usesNet = no
    var usesGUI = no
    var usesSerialisation = no
    var isExported = no
    var usesReflection = no
    var nodispatch = no
    var isStmt = no
    var isDeclare = no
    var isCalledFromWithinLoop = no
    var elemental = no
    var isDefCtor= no
    var analysed = no
 end type

declare type ASTTest
    var body as ASTScope = nil
    var name = ""
    var line = 0
    var analysed = no
end type

declare type ASTModule
    var imports as ASTImport[]
    var funcs as ASTFunc[]
    var tests as ASTTest[]
    var types as ASTType[]
    var enums as ASTType[]
    var scope as ASTScope = nil
    var name = ""
    var moduleName = ""
end type
