enum ASTTypeTypes
unresolved = 0
end
enum ASTCollectionTypes
none = 0
end
enum ASTTokenKinds
unknown = 0
newline
oneSpace
keywordFor
keywordIf
number
string
identifier
resolvedIdentifier
end
declare type ASTImport
    var importFile = ""
    var aliasOffset = 0
    var isPackage = no
    var hasAlias = no
end

declare type ASTUnits
    var powers Number[]
    var factor = 0
    var factors Number[]
    var label = ""
end

declare type ASTTypeSpec
    var ttype ASTType = nil
    var name = ""
    var units ASTUnits = nil

    var dims = 0
    var col = 0
    var line = 0

    var typeType ASTTypeTypes = .unresolved
    var collectionType ASTCollectionTypes = .none
    var nullable = no
end

declare type ASTVar
    var typeSpec ASTTypeSpec = nil
    var init ASTExpr = nil
    var name = ""
    var line = 0
    var col = 0
    var used = no
    var changed = no
    var isLet = no
    var isVar = no
    var stackAlloc = no
    var isTarget = no
    var printed = no
    var escapes = no
    var canInplace = no
    var returned = no
end

declare type ASTExpr
    var line = 0
    var col = 0
    var typeType = ASTTypeTypes.unresolved
    var collectionType = ASTCollectionTypes.none
    var nullable = no
    var impure = no
    var elemental = no
    var throws = no
    var promote = no
    var canEval = no
    var didEval = no
    var prec = 0
    var unary = no
    var rassoc = no
    var kind = ASTTokenKinds.unknown
    var left ASTExpr = nil
    var func ASTFunc = nil
    var vvar ASTVar = nil
    var body ASTScope = nil
    var right ASTExpr = nil
end

declare type ASTScope
    var stmts ASTExpr[]
    var locals ASTVar[]
    var parent ASTScope = nil
end

declare type ASTType
    var super ASTTypeSpec = nil
    var name = ""
    var body ASTScope = nil
    var line = 0
    var col = 0
    var analysed = no
    var isValueType = no
end

declare type ASTFunc
    var body ASTScope = nil
    var args ASTVar[]
    var argCount = 0

    var returnSpec ASTTypeSpec = nil
    var name = ""
    var selector = ""
    var line = 0
    var usesIO = no
    var throws = no

    var isRecursive = no
    var usesNet = no
    var usesGUI = no
    var usesSerialisation = no
    var isExported = no
    var usesReflection = no
    var nodispatch = no
    var isStmt = no
    var isDeclare = no
    var isCalledFromWithinLoop = no
    var elemental = no
    var isDefCtor= no
    var analysed = no
 end

declare type ASTTest
    var body ASTScope = nil
    var name = ""
    var line = 0
    var analysed = no
end

declare type ASTModule
    var imports ASTImport[]
    var funcs ASTFunc[]
    var tests ASTTest[]
    var types ASTType[]
    var enums ASTType[]
    var scope ASTScope = nil
    var name = ""
    var moduleName = ""
end
